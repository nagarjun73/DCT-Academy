<!DOCTYPE html>
<html>
  <head>
    <title></title>
  </head>
  <body>
    <div id="root">

    </div>

    <script src="./JS/react.development.js"></script>
    <script src="./JS/react-dom.development.js"></script>
    <script src="./JS/babel-standalone@6.26.0_babel.js"></script>
    <!-- <script src="./JS/unpkg.com_date-fns@2.30.0_index.js"></script> -->

    <script type="text/babel">
      const rootHandle = document.getElementById("root");
      const {useState} = React

      function App(props){
        const[start, setStart] = useState('')
        const[end, setEnd] = useState('')
        const[slots, setSlots] =useState([])


      function startTimeHandle(e){
        const startInput = e.target.value
        console.log(startInput);
        setStart(startInput)
      }

      function endTimeHandle(e){
        const endInput = e.target.value
        setEnd(endInput)
      }

      function slotsHandle(e){
        const slotsInput = e.target.value
        setSlots(slotsInput)
      }

      function formSubmitHandle(e){
        e.preventDefault();

        function addZero(i) {
          if (i < 10) {i = "0" + i}
          return i;
        }
        
        const startTimeHours = addZero(new Date(start).getHours())
        const startTimeMinutes = addZero(new Date(start).getMinutes())
        const endTimehours = addZero(new Date(end).getHours())
        const endTimeMinutes = addZero(new Date(end).getMinutes())
        
        const totalSlots = (((endTimehours - startTimeHours) * 60) + (endTimeMinutes - startTimeMinutes)) / Number(slots)
        console.log(startTimeHours, startTimeMinutes, totalSlots);

        const slotsArr = [`${startTimeHours}:${startTimeMinutes}`]
        console.log(slotsArr);
        for(let i=0; i<totalSlots - 1; i++){
            let min = Number(slotsArr[i].slice(3,4))
            let str = min + Number(slots)
            if(str > 60 ){
                let newMin = min - 60
                slotsArr.push(`${startTimeHours + 1}:${newMin}`) 
            }else{
                slotsArr.push(`${startTimeHours}:${str}`) 
            }
        }
        console.log(slotsArr);
      }

        return(
          <div>
            <form onSubmit={formSubmitHandle}>
              <label>start time</label> <br/>
              <input type="datetime-local" value={start} onChange={startTimeHandle}/><br/>

              <label>end time</label><br/>
              <input type="datetime-local" value={end} onChange={endTimeHandle}/><br/>

              <label>slot</label><br/>
              <input type="radio" name='slotSelect' value='15' onChange={slotsHandle}/> 15 Min <br/>
              <input type="radio" name='slotSelect' value='30' onChange={slotsHandle}/> 30 Min <br/>
              <input type="radio" name='slotSelect' value='60' onChange={slotsHandle}/> 60 Min <br/>

              <input type="submit" />
            </form>
          </div>
        )
      }

      ReactDOM.render(<App/>, rootHandle)
    </script>
  </body>
</html>